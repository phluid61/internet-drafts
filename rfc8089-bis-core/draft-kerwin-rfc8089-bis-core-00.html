<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>The file URI Scheme</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
      /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
      a.info {
          /* This is the key. */
          position: relative;
          z-index: 24;
          text-decoration: none;
      }
      a.info:hover {
          z-index: 25;
          color: #FFF; background-color: #900;
      }
      a.info span { display: none; }
      a.info:hover span.info {
          /* The span will display just on :hover state. */
          display: block;
          position: absolute;
          font-size: smaller;
          top: 2em; left: -5em; width: 15em;
          padding: 2px; border: 1px solid #333;
          color: #900; background-color: #EEE;
          text-align: left;
      }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  max-width: 55em;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Notational Conventions">
<link href="#rfc.section.2" rel="Chapter" title="2 Syntax">
<link href="#rfc.section.3" rel="Chapter" title="3 Operations Involving file URIs">
<link href="#rfc.section.4" rel="Chapter" title="4 File System Name Encoding">
<link href="#rfc.section.5" rel="Chapter" title="5 Security Considerations">
<link href="#rfc.section.6" rel="Chapter" title="6 IANA Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="8 References">
<link href="#rfc.references.1" rel="Chapter" title="8.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="8.2 Informative References">
<link href="#rfc.appendix.A" rel="Chapter" title="A Differences from Previous Specifications">
<link href="#rfc.appendix.B" rel="Chapter" title="B Example URIs">
<link href="#rfc.appendix.C" rel="Chapter" title="C Similar Technologies">
<link href="#rfc.appendix.D" rel="Chapter" title="D System-Specific Operations">
<link href="#rfc.appendix.D.1" rel="Chapter" title="D.1 POSIX Systems">
<link href="#rfc.appendix.D.2" rel="Chapter" title="D.2 MS-DOS and Windows Systems">
<link href="#rfc.appendix.D.3" rel="Chapter" title="D.3 Mac OS X Systems">
<link href="#rfc.appendix.D.4" rel="Chapter" title="D.4 OpenVMS Files-11 Systems">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content="xml2rfc version 2.14.1 - https://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Kerwin, M." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-kerwin-rfc8089-bis-core-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2018-13" />
  <meta name="dct.abstract" content="This document provides a specification of the &#8220;file&#8221; Uniform Resource Identifier (URI) scheme.  It defines a common syntax which is intended to interoperate across the broad spectrum of existing usages.  It obsoletes RFC 8089." />
  <meta name="description" content="This document provides a specification of the &#8220;file&#8221; Uniform Resource Identifier (URI) scheme.  It defines a common syntax which is intended to interoperate across the broad spectrum of existing usages.  It obsoletes RFC 8089." />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Applications Area Working Group</td>
<td class="right">M. Kerwin</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">QUT</td>
</tr>
<tr>
<td class="left">Obsoletes: 8089 (if approved)</td>
<td class="right">December 13, 2018</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right"></td>
</tr>
<tr>
<td class="left">Expires: June 16, 2019</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">The file URI Scheme<br />
  <span class="filename">draft-kerwin-rfc8089-bis-core-00</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document provides a specification of the &#8220;file&#8221; Uniform Resource Identifier (URI) scheme.  It defines a common syntax which is intended to interoperate across the broad spectrum of existing usages.  It obsoletes RFC 8089.</p>
<h1><a>Note to Readers</a></h1>
<p>This draft should be discussed on the GitHub repository &lt;https://github.com/phluid61/internet-drafts/labels/rfc8089-bis-core&gt;.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of This Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at https://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on June 16, 2019.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2018 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (https://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<ul><li>1.1.   <a href="#rfc.section.1.1">Notational Conventions</a>
</li>
</ul><li>2.   <a href="#rfc.section.2">Syntax</a>
</li>
<li>3.   <a href="#rfc.section.3">Operations Involving file URIs</a>
</li>
<li>4.   <a href="#rfc.section.4">File System Name Encoding</a>
</li>
<li>5.   <a href="#rfc.section.5">Security Considerations</a>
</li>
<li>6.   <a href="#rfc.section.6">IANA Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Acknowledgements</a>
</li>
<li>8.   <a href="#rfc.references">References</a>
</li>
<ul><li>8.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>8.2.   <a href="#rfc.references.2">Informative References</a>
</li>
</ul><li>Appendix A.   <a href="#rfc.appendix.A">Differences from Previous Specifications</a>
</li>
<li>Appendix B.   <a href="#rfc.appendix.B">Example URIs</a>
</li>
<li>Appendix C.   <a href="#rfc.appendix.C">Similar Technologies</a>
</li>
<li>Appendix D.   <a href="#rfc.appendix.D">System-Specific Operations</a>
</li>
<ul><li>D.1.   <a href="#rfc.appendix.D.1">POSIX Systems</a>
</li>
<li>D.2.   <a href="#rfc.appendix.D.2">MS-DOS and Windows Systems</a>
</li>
<li>D.3.   <a href="#rfc.appendix.D.3">Mac OS X Systems</a>
</li>
<li>D.4.   <a href="#rfc.appendix.D.4">OpenVMS Files-11 Systems</a>
</li>
</ul><li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#introduction" id="introduction">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">A file URI identifies an object (a &#8220;file&#8221;) stored in a structured object naming and accessing environment on a host (a &#8220;file system.&#8221;) The URI can be used in discussions about the file, and if other conditions are met it can be dereferenced to directly access the file.</p>
<p id="rfc.section.1.p.2">This document specifies a syntax based on the generic syntax of <a href="#RFC3986" class="xref">[RFC3986]</a> that is compatible with most existing usages.  Where incompatibilities arise they are usually in parts of the scheme that were underspecified in earlier definitions and have been tightened up by more recent specifications.  <a href="#diff" class="xref">Appendix A</a> lists significant changes from historical syntax definitions.</p>
<p id="rfc.section.1.p.3">Extensions to the syntax which might be encountered in practice are listed in <a href="#draft-kerwin-rfc8089-bis-info" class="xref">[draft-kerwin-rfc8089-bis-info]</a>;  those extensions are given for informational purposes and are not a requirement of implementation.</p>
<p id="rfc.section.1.p.4">The file URI scheme is not coupled with a specific protocol, nor with a specific media type <a href="#RFC6838" class="xref">[RFC6838]</a>.  See <a href="#operations" class="xref">Section 3</a> for a discussion of operations that can be performed on the object identified by a file URI.</p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> <a href="#notational-conventions" id="notational-conventions">Notational Conventions</a>
</h1>
<p id="rfc.section.1.1.p.1">The key words &#8220;MUST&#8221;, &#8220;MUST NOT&#8221;, &#8220;REQUIRED&#8221;, &#8220;SHALL&#8221;, &#8220;SHALL NOT&#8221;, &#8220;SHOULD&#8221;, &#8220;SHOULD NOT&#8221;, &#8220;RECOMMENDED&#8221;, &#8220;NOT RECOMMENDED&#8221;, &#8220;MAY&#8221;, and &#8220;OPTIONAL&#8221; in this document are to be interpreted as described in BCP 14 <a href="#RFC2119" class="xref">[RFC2119]</a> <a href="#RFC8174" class="xref">[RFC8174]</a> when, and only when, they appear in all capitals, as shown here.</p>
<p id="rfc.section.1.1.p.2">Throughout this document the term &#8220;local file&#8221; is used to describe files that can be accessed through the local file system API using only the information included in the file path, not relying on other information (such as network addresses.)  It is important to note that a local file may not be physically located on the local machine, for example if a networked file system is transparently mounted into the local file system.</p>
<p id="rfc.section.1.1.p.3">The term &#8220;local file URI&#8221; is used to describe file URIs which have no <samp>authority</samp> component, or where the authority is the special string &#8220;localhost&#8221; or a fully qualified domain name that resolves to the machine from which the URI is being interpreted (<a href="#syntax" class="xref">Section 2</a>).</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#syntax" id="syntax">Syntax</a>
</h1>
<p id="rfc.section.2.p.1">The file URI syntax is defined here in Augmented Backus-Naur Form (ABNF) <a href="#RFC5234" class="xref">[RFC5234]</a>, importing the <samp>host</samp> and <samp>path-absolute</samp> rules from <a href="#RFC3986" class="xref">[RFC3986]</a> (as updated by <a href="#RFC6874" class="xref">[RFC6874]</a>), and <samp>ALPHA</samp> from <a href="#RFC5234" class="xref">[RFC5234]</a>.</p>
<p id="rfc.section.2.p.2">The generic syntax in <a href="#RFC3986" class="xref">[RFC3986]</a> includes <samp>path</samp> and <samp>authority</samp> components, for each of which only a subset is used in the definition of the file URI scheme.  The relevant subset of <samp>path</samp> is <samp>path-absolute</samp>, and the subset of <samp>authority</samp> is <samp>file-auth</samp>, given below.</p>
<p id="rfc.section.2.p.3">The syntax definition below is different from those given in previous definitions.  <a href="#diff" class="xref">Appendix A</a> enumerates significant differences.</p>
<pre>
   file-URI       = file-scheme ":" file-hier-part

   file-scheme    = "file"        ; case-insensitive

   file-hier-part = ( "//" auth-path )
                  / local-path

   auth-path      = [ file-auth ] path-absolute

   local-path     = path-absolute
                  / ( drive-letter path-absolute )

   drive-letter   = ALPHA ":"     ; case-insensitive

   file-auth      = "localhost"   ; RFC 3986 "authority", as
                  / host          ;  applicable to a file URI
</pre>
<p id="rfc.section.2.p.4">Past specifications mandated an authority component preceded by two slash characters (&#8220;//&#8221;) in all file URIs;  however in practice implementations have relaxed this requirement so the <samp>file-hier-part</samp> rule includes a <samp>local-path</samp> option without an authority component.</p>
<p id="rfc.section.2.p.5">The <samp>file-auth</samp> rule can match either:</p>
<p></p>

<ul>
<li>the string &#8220;localhost&#8221;, which is interpreted as &#8220;the machine from which the URI is being interpreted&#8221; exactly as if no authority were present; or:</li>
<li>
<samp>host</samp> &#8211; the fully qualified domain name of the system on which the file is accessible.  It informs a client on another system that it cannot access the file system, or perhaps that it needs to use some other local mechanism to access the file.</li>
</ul>
<p id="rfc.section.2.p.7">Various implementations have mixed these definitions, for example interpreting &#8220;localhost&#8221; as a remote host name, or treating any host name as &#8220;localhost&#8221;.  So while users and systems MAY include an <samp>auth-path</samp> when creating a file URI, to maximize compatibility with previous specifications, they SHOULD NOT include a <samp>file-auth</samp> in the <samp>auth-path</samp> of any file URI they create.</p>
<p id="rfc.section.2.p.8">The path component represents the absolute path to the file in the file system.  Note that both <samp>auth-path</samp> and <samp>local-path</samp> use the <samp>path-absolute</samp> rule which begins with a slash character (&#8220;/&#8221;).  In the case of <samp>auth-path</samp> the slash serves both to separate the path from the authority, and to represent the <a href="#POSIX" class="xref">[POSIX]</a> convention that a path beginning with a slash character is relative to the root of the file system.  In <samp>local-path</samp> it solely represents the <a href="#POSIX" class="xref">[POSIX]</a> convention, and MAY be omitted before the drive letter when representing an absolute path in a MS-DOS or Windows file system.</p>
<p id="rfc.section.2.p.9">Some file systems have case-sensitive file naming and some do not.  As such the file URI scheme supports case sensitivity, in order to retain the case as given.  Any transport-related handling of the file URI scheme MUST retain the case as given.  Any mapping to or from a case-insensitive form is solely the responsibility of the implementation processing the file URI on behalf of the referenced file system.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#operations" id="operations">Operations Involving file URIs</a>
</h1>
<p id="rfc.section.3.p.1">See the POSIX file and directory operations <a href="#POSIX" class="xref">[POSIX]</a> for examples of standardized operations that can be performed on files.</p>
<p id="rfc.section.3.p.2">A file URI can be dependably dereferenced or translated to a local file path only if it is local.  A file URI is considered &#8220;local&#8221; if it has no <samp>file-auth</samp>, or the <samp>file-auth</samp> is the special string &#8220;localhost&#8221; or a fully qualified domain name that resolves to the machine from which the URI is being interpreted (<a href="#syntax" class="xref">Section 2</a>).</p>
<p id="rfc.section.3.p.3">This specification neither defines nor forbids any set of operations that might be performed on a file identified by a non-local file URI.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#encoding" id="encoding">File System Name Encoding</a>
</h1>
<p id="rfc.section.4.p.1">File systems use various encoding schemes to store file and directory names.  Many modern file systems store file and directory names as arbitrary sequences of octets, in which case the representation as an encoded string often depends on the user&#8217;s localization settings or defaults to UTF-8 <a href="#STD63" class="xref">[STD63]</a>.</p>
<p id="rfc.section.4.p.2">When a file URI is produced that represents textual data consisting of characters from the Unicode Standard coded character set <a href="#UNICODE" class="xref">[UNICODE]</a>, the data SHOULD be encoded as octets according to the UTF-8 character encoding scheme <a href="#STD63" class="xref">[STD63]</a> before percent-encoding is applied; as per <a href="#RFC3986" class="xref">[RFC3986]</a>, Section 2.5.</p>
<p id="rfc.section.4.p.3">A decision not to use percent-encoded UTF-8 is outside the scope of this specification.  It will typically require the use of heuristics or explicit knowledge about the way the string will be processed.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#security" id="security">Security Considerations</a>
</h1>
<p id="rfc.section.5.p.1">There are many security considerations for URI schemes discussed in <a href="#RFC3986" class="xref">[RFC3986]</a>.</p>
<p id="rfc.section.5.p.2">File access and the granting of privileges for specific operations are complex topics, and the use of file URIs can complicate the security model in effect for file privileges.</p>
<p id="rfc.section.5.p.3">Historically, user agents have granted content from the file URI scheme a tremendous amount of privilege.  However, granting all local files such wide privileges can lead to privilege escalation attacks.  Some user agents have had success granting local files directory-based privileges, but this approach has not been widely adopted.  Other user agents use globally unique identifiers as the origin for each file URI <a href="#RFC6454" class="xref">[RFC6454]</a>, which is the most secure option.</p>
<p id="rfc.section.5.p.4">Treating a non-local file URI as local or otherwise attempting to perform local operations on a non-local URI can result in security problems.  </p>
<p id="rfc.section.5.p.5">File systems typically assign an operational meaning to special characters, such as the &#8220;/&#8221;, &#8220;\&#8221;, &#8220;:&#8221;, &#8220;[&#8221;, and &#8220;]&#8221; characters, and to special device names like &#8220;.&#8221;, &#8220;..&#8221;, &#8220;&#8230;&#8221;, &#8220;aux&#8221;, &#8220;lpt&#8221;, etc.  In some cases, merely testing for the existence of such a name will cause the operating system to pause or invoke unrelated system calls, leading to significant security concerns regarding denial of service and unintended data transfer.  It would not be possible for this specification to list all such significant characters and device names.  Implementers should research the reserved names and characters for the types of storage device that may be attached to their application and restrict the use of data obtained from URI components accordingly.</p>
<p id="rfc.section.5.p.6">File systems vary in the way they handle case.  Care must be taken to avoid issues resulting from possibly unexpected aliasing from case-only differences between file paths or URIs, or from mismatched encodings or Unicode equivalences <a href="#UAX15" class="xref">[UAX15]</a> (see <a href="#encoding" class="xref">Section 4</a>).</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#iana-considerations" id="iana-considerations">IANA Considerations</a>
</h1>
<p id="rfc.section.6.p.1">This document defines the following URI scheme, so the &#8220;Permanent URI Schemes&#8221; registry has been updated accordingly.  This registration complies with <a href="#BCP35" class="xref">[BCP35]</a>.</p>
<p></p>

<dl>
<dt>Scheme name:</dt>
<dd style="margin-left: 8">
<br> file</dd>
<dt>Status:</dt>
<dd style="margin-left: 8">
<br> permanent</dd>
<dt>Applications/protocols that use this scheme name:</dt>
<dd style="margin-left: 8">
<br> Commonly used in hypertext documents to refer to files without depending on network access.  Supported by major browsers.</dd>
<dt></dt>
<dd style="margin-left: 8">Used in development libraries, such as: <ul>
<li>Windows Shell (PathCreateFromUrl, UrlCreateFromPath).</li>
<li>libwww-perl - The World-Wide Web library for Perl.</li>
</ul>
<p> </p>
</dd>
<dt>Contact:</dt>
<dd style="margin-left: 8">
<br> Applications and Real-Time Area &lt;art@ietf.org&gt;</dd>
<dt>Change Controller:</dt>
<dd style="margin-left: 8">
<br> This scheme is registered under the IETF tree.  As such, the IETF maintains change control.</dd>
<dt>References:</dt>
<dd style="margin-left: 8">
<br> This RFC.</dd>
</dl>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#acknowledgements" id="acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.7.p.1">This document is derived directly from <a href="#RFC8089" class="xref">[RFC8089]</a>.  All thanks and acknowledgements in that document apply equally to this.</p>
<h1 id="rfc.references">
<a href="#rfc.references">8.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">8.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a>Bradner, S.</a>, "<a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3986">[RFC3986]</b></td>
<td class="top">
<a>Berners-Lee, T.</a>, <a>Fielding, R.</a> and <a>L. Masinter</a>, "<a href="https://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>", STD 66, RFC 3986, DOI 10.17487/RFC3986, January 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5234">[RFC5234]</b></td>
<td class="top">
<a>Crocker, D.</a> and <a>P. Overell</a>, "<a href="https://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>", STD 68, RFC 5234, DOI 10.17487/RFC5234, January 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6454">[RFC6454]</b></td>
<td class="top">
<a>Barth, A.</a>, "<a href="https://tools.ietf.org/html/rfc6454">The Web Origin Concept</a>", RFC 6454, DOI 10.17487/RFC6454, December 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6874">[RFC6874]</b></td>
<td class="top">
<a>Carpenter, B.</a>, <a>Cheshire, S.</a> and <a>R. Hinden</a>, "<a href="https://tools.ietf.org/html/rfc6874">Representing IPv6 Zone Identifiers in Address Literals and Uniform Resource Identifiers</a>", RFC 6874, DOI 10.17487/RFC6874, February 2013.</td>
</tr>
<tr>
<td class="reference"><b id="RFC8174">[RFC8174]</b></td>
<td class="top">
<a>Leiba, B.</a>, "<a href="https://tools.ietf.org/html/rfc8174">Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</a>", BCP 14, RFC 8174, DOI 10.17487/RFC8174, May 2017.</td>
</tr>
<tr>
<td class="reference"><b id="STD63">[STD63]</b></td>
<td class="top">
<a>Yergeau, F.</a>, "<a href="https://tools.ietf.org/html/rfc3629">UTF-8, a transformation format of ISO 10646</a>", STD 63, RFC 3629, DOI 10.17487/RFC3629, November 2003.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">8.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="Bash-Tilde">[Bash-Tilde]</b></td>
<td class="top">
<a>Free Software Foundation, Inc</a>, "<a href="https://www.gnu.org/software/bash/manual/html_node/Tilde-Expansion.html">Bash Reference Manual: Tilde Expansion</a>", February 2014.</td>
</tr>
<tr>
<td class="reference"><b id="BCP35">[BCP35]</b></td>
<td class="top">
<a>Thaler, D.</a>, <a>Hansen, T.</a> and <a>T. Hardie</a>, "<a href="https://tools.ietf.org/html/rfc7595">Guidelines and Registration Procedures for URI Schemes</a>", BCP 35, RFC 7595, DOI 10.17487/RFC7595, June 2015.</td>
</tr>
<tr>
<td class="reference"><b id="draft-kerwin-rfc8089-bis-info">[draft-kerwin-rfc8089-bis-info]</b></td>
<td class="top">
<a>Kerwin, M.</a>, "<a>Using the file URI Scheme</a>", 2018.</td>
</tr>
<tr>
<td class="reference"><b id="MS-DTYP">[MS-DTYP]</b></td>
<td class="top">
<a>Microsoft Open Specifications</a>, "<a href="https://msdn.microsoft.com/en-us/library/gg465305.aspx">Windows Data Types, 2.2.57 UNC</a>", October 2015.</td>
</tr>
<tr>
<td class="reference"><b id="POSIX">[POSIX]</b></td>
<td class="top">
<a>IEEE</a>, "<a>IEEE 1003.1-2017 - IEEE Standard for Information Technology--Portable Operating System Interface (POSIX(R)) Base Specifications, Issue 7</a>", 2017.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1738">[RFC1738]</b></td>
<td class="top">
<a>Berners-Lee, T.</a>, <a>Masinter, L.</a> and <a>M. McCahill</a>, "<a href="https://tools.ietf.org/html/rfc1738">Uniform Resource Locators (URL)</a>", RFC 1738, DOI 10.17487/RFC1738, December 1994.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2396">[RFC2396]</b></td>
<td class="top">
<a>Berners-Lee, T.</a>, <a>Fielding, R.</a> and <a>L. Masinter</a>, "<a href="https://tools.ietf.org/html/rfc2396">Uniform Resource Identifiers (URI): Generic Syntax</a>", RFC 2396, DOI 10.17487/RFC2396, August 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6838">[RFC6838]</b></td>
<td class="top">
<a>Freed, N.</a>, <a>Klensin, J.</a> and <a>T. Hansen</a>, "<a href="https://tools.ietf.org/html/rfc6838">Media Type Specifications and Registration Procedures</a>", BCP 13, RFC 6838, DOI 10.17487/RFC6838, January 2013.</td>
</tr>
<tr>
<td class="reference"><b id="RFC8089">[RFC8089]</b></td>
<td class="top">
<a>Kerwin, M.</a>, "<a href="https://tools.ietf.org/html/rfc8089">The "file" URI Scheme</a>", RFC 8089, DOI 10.17487/RFC8089, February 2017.</td>
</tr>
<tr>
<td class="reference"><b id="UAX15">[UAX15]</b></td>
<td class="top">
<a>Davis, M.</a> and <a>K. Whistler</a>, "<a href="https://www.unicode.org/reports/tr15/tr15-47.html">Unicode Standard Annex #15: Unicode Normalization Forms</a>", May 2018.</td>
</tr>
<tr>
<td class="reference"><b id="UNICODE">[UNICODE]</b></td>
<td class="top">
<a>The Unicode Consortium</a>, "<a href="https://www.unicode.org/versions/Unicode11.0.0/">The Unicode Standard, Version 11.0.0</a>", ISBN 978-1-936213-19-1, June 2018.</td>
</tr>
<tr>
<td class="reference"><b id="WHATWG-URL">[WHATWG-URL]</b></td>
<td class="top">
<a>WHATWG</a>, "<a href="https://url.spec.whatwg.org/">URL Standard</a>", December 2016.</td>
</tr>
<tr>
<td class="reference"><b id="Win32-Namespaces">[Win32-Namespaces]</b></td>
<td class="top">
<a>Microsoft Developer Network</a>, "<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx">Naming Files, Paths, and Namespaces</a>", June 2013.</td>
</tr>
<tr>
<td class="reference"><b id="Zsh-Tilde">[Zsh-Tilde]</b></td>
<td class="top">"<a href="http://zsh.sourceforge.net/Doc/Release/Expansion.html#Filename-Expansion">zsh: 14.7 Filename Expansion</a>", December 2015.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.A">
<a href="#rfc.appendix.A">Appendix A.</a> <a href="#diff" id="diff">Differences from Previous Specifications</a>
</h1>
<p id="rfc.section.A.p.1">The syntax definition in <a href="#syntax" class="xref">Section 2</a> inherits incremental differences from the general syntax of <a href="#RFC1738" class="xref">[RFC1738]</a> made by <a href="#RFC2396" class="xref">[RFC2396]</a> (<a href="#RFC2396" class="xref">[RFC2396]</a>, Appendix G) and <a href="#RFC3986" class="xref">[RFC3986]</a> (<a href="#RFC3986" class="xref">[RFC3986]</a>, Appendix D).</p>
<p id="rfc.section.A.p.2">According to the definition in <a href="#RFC1738" class="xref">[RFC1738]</a> a file URL always started with the token &#8220;file://&#8221;, followed by an (optionally blank) host name and a &#8220;/&#8221;.  The syntax given in <a href="#syntax" class="xref">Section 2</a> makes the entire authority component, including the double slashes &#8220;//&#8221;, optional.</p>
<p id="rfc.section.A.p.3">Further, according to <a href="#RFC1738" class="xref">[RFC1738]</a> the initial slash character &#8220;/&#8221; after the authority was not defined as part of the path component, where <a href="#RFC3986" class="xref">[RFC3986]</a> includes the slash in the path.  As such, in more modern implementations the path component is often interpreted as a complete file path, including sequences of empty path segments (represented as subsequence slashes).</p>
<p id="rfc.section.A.p.4">The definition specified in <a href="#RFC8089" class="xref">[RFC8089]</a> did not allow for file URIs with no authority component that start with a MS-DOS or Windows drive letter (for example &#8220;file:c:/&#8221;).  That syntax is allowed in this specification.</p>
<h1 id="rfc.appendix.B">
<a href="#rfc.appendix.B">Appendix B.</a> <a href="#examples" id="examples">Example URIs</a>
</h1>
<p id="rfc.section.B.p.1">The syntax in <a href="#syntax" class="xref">Section 2</a> is intended to support file URIs that take the following forms:</p>
<p id="rfc.section.B.p.2">Local files:</p>
<p></p>

<ul>
<li>A traditional file URI for a local file, with an empty authority.  This is the most common format in use today. E.g.:  <ul><li><samp>file:///path/to/file</samp></li></ul>
</li>
<li>The minimal representation of a local file, with no authority field and an absolute path that begins with a slash &#8220;/&#8221; or MS-DOS or Windows drive letter. E.g.:  <ul>
<li><samp>file:/path/to/file</samp></li>
<li><samp>file:c:/path/to/file</samp></li>
</ul>
</li>
</ul>
<p id="rfc.section.B.p.4">Non-local files:</p>
<p></p>

<ul><li>A non-local file, with an explicit authority. E.g.:  <ul><li><samp>file://host.example.com/path/to/file</samp></li></ul>
</li></ul>
<h1 id="rfc.appendix.C">
<a href="#rfc.appendix.C">Appendix C.</a> <a href="#similar-technologies" id="similar-technologies">Similar Technologies</a>
</h1>
<p></p>

<ul>
<li>The WHATWG URL specification <a href="#WHATWG-URL" class="xref">[WHATWG-URL]</a> defines browser behavior for a variety of inputs, including file URIs.  As a living document, it changes to reflect updates in browser behavior.  As a result, its algorithms and syntax definitions may or may not be consistent with this specification.  Implementors should be aware of this possible discrepancy if they expect to share file URIs with browsers that follow the WHATWG specification.</li>
<li>The Universal Naming Convention (UNC) <a href="#MS-DTYP" class="xref">[MS-DTYP]</a> defines a string format that can perform a similar role to the file URI scheme in describing the location of files, except that files located by UNC filespace selector strings are typically stored on a remote machine and accessed using a network protocol.</li>
<li>The Microsoft Windows API defines Win32 Namespaces <a href="#Win32-Namespaces" class="xref">[Win32-Namespaces]</a> for interacting with files and devices using Windows API functions.  These namespaced paths are prefixed by &#8220;\\?\&#8221; for Win32 File Namespaces and &#8220;\\.\&#8221; for Win32 Device Namespaces.  There is also a special case for UNC file paths in Win32 File Namespaces, referred to as &#8220;Long UNC&#8221;, using the prefix &#8220;\\?\UNC\&#8221;.  This specification does not define a mechanism for translating namespaced paths to or from file URIs.</li>
</ul>
<h1 id="rfc.appendix.D">
<a href="#rfc.appendix.D">Appendix D.</a> <a href="#system-specific" id="system-specific">System-Specific Operations</a>
</h1>
<p id="rfc.section.D.p.1">This appendix is not normative, and does not include requirements for conformance or interoperability.  It highlights some observed behaviours and provides system-specific guidance for interacting with file URIs and file system paths.</p>
<p id="rfc.section.D.p.2">This is not an exhaustive list of operating or file systems;  rather, it is intended to illustrate certain types of interactions that might be encountered.</p>
<h1 id="rfc.appendix.D.1">
<a href="#rfc.appendix.D.1">D.1.</a> <a href="#sys-unix" id="sys-unix">POSIX Systems</a>
</h1>
<p id="rfc.section.D.1.p.1">In a POSIX file system the root of the file system is represented as a directory with a zero-length name, usually written as &#8220;/&#8221;;  the presence of this root in a file URI can be taken as given by the initial slash in the <samp>path-absolute</samp> rule.</p>
<p id="rfc.section.D.1.p.2">Common UNIX shells such as the Bourne-Again SHell (bash) and Z Shell (zsh) provide a function known as &#8220;tilde expansion&#8221; <a href="#Bash-Tilde" class="xref">[Bash-Tilde]</a> or &#8220;filename expansion&#8221; <a href="#Zsh-Tilde" class="xref">[Zsh-Tilde]</a>, where a path that begins with a tilde &#8220;~&#8221; character can be expanded out to a special directory name.  No such facility exists using the file URI scheme;  a tilde in a file URI is always just a tilde.</p>
<h1 id="rfc.appendix.D.2">
<a href="#rfc.appendix.D.2">D.2.</a> <a href="#sys-dos" id="sys-dos">MS-DOS and Windows Systems</a>
</h1>
<p id="rfc.section.D.2.p.1">When mapping a MS-DOS or Windows file path to a file URI, the drive letter (e.g. &#8220;c:&#8221;) is typically mapped into the first path segment.</p>
<p id="rfc.section.D.2.p.2">A relative reference starting with a drive letter (e.g. &#8220;c:/foo.txt&#8221;) would be interpreted by a generic URI parser as a URI with the drive letter as its scheme.  Instead such a reference would be constructed with a leading slash &#8220;/&#8221; character (e.g. &#8220;/c:/foo.txt&#8221;).</p>
<p id="rfc.section.D.2.p.3">Absolute file URIs without a drive letter are resolved relative to the current context (i.e. with the same drive letter as the base URL, or the current working environment if there is no base URL.)</p>
<p id="rfc.section.D.2.p.4">URIs and relative references with a drive letter followed by a character other than a slash (e.g. &#8220;file:c:bar/baz.txt&#8221; or &#8220;/c:../foo.txt&#8221;) represent relative file paths and should not be accepted as dereferenceable URIs in MS-DOS or Windows systems and should not be created.</p>
<p><a href="#draft-kerwin-rfc8089-bis-info" class="xref">[draft-kerwin-rfc8089-bis-info]</a> lists some nonstandard mechanisms for interacting with MS-DOS or Windows file paths and URIs.</p>
<h1 id="rfc.appendix.D.3">
<a href="#rfc.appendix.D.3">D.3.</a> <a href="#sys-osx" id="sys-osx">Mac OS X Systems</a>
</h1>
<p id="rfc.section.D.3.p.1">The HFS+ file system uses a nonstandard normalization form, similar to Normalization Form D <a href="#UAX15" class="xref">[UAX15]</a>.  Take care when transforming HFS+ file paths to and from URIs (<a href="#encoding" class="xref">Section 4</a>).</p>
<h1 id="rfc.appendix.D.4">
<a href="#rfc.appendix.D.4">D.4.</a> <a href="#sys-vms" id="sys-vms">OpenVMS Files-11 Systems</a>
</h1>
<p id="rfc.section.D.4.p.1">When mapping a VMS file path to a file URI, the device name is mapped into the first path segment.  Note that the dollars sign &#8220;$&#8221; is a reserved character per the definition in <a href="#RFC3986" class="xref">[RFC3986]</a>, Section 2.2, so should be percent-encoded if present in the device name.</p>
<p id="rfc.section.D.4.p.2">If the VMS file path includes a node reference, that reference is used as the authority.  Where the original node reference includes a user name and password in an access control string, they can be transcribed into the authority using a nonstandard extension described in <a href="#draft-kerwin-rfc8089-bis-info" class="xref">[draft-kerwin-rfc8089-bis-info]</a>.</p>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Matthew Kerwin</span> 
	  <span class="n hidden">
		<span class="family-name">Kerwin</span>
	  </span>
	</span>
	<span class="org vcardline">Queensland University of Technology</span>
	<span class="adr">
	  <span class="vcardline">Victoria Park Road</span>

	  <span class="vcardline">
		<span class="locality">Kelvin Grove</span>,  
		<span class="region">QLD</span> 
		<span class="code">4059</span>
	  </span>
	  <span class="country-name vcardline">Australia</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:matthew.kerwin@qut.edu.au">matthew.kerwin@qut.edu.au</a></span>

  </address>
</div>

</body>
</html>
