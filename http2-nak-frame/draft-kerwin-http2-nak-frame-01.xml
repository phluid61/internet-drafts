<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.2.6 -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
]>

<?rfc toc="yes"?>
<?rfc tocindent="yes"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>
<?rfc strict="yes"?>
<?rfc compact="yes"?>
<?rfc comments="yes"?>
<?rfc inline="yes"?>

<rfc ipr="trust200902" docName="draft-kerwin-http2-nak-frame-01" category="std">

  <front>
    <title abbrev="http2-nak-frame">HTTP/2 "Dropped Frame" Frame</title>

    <author initials="M." surname="Kerwin" fullname="Matthew Kerwin">
      <organization></organization>
      <address>
        <email>matthew@kerwin.net.au</email>
        <uri>https://matthew.kerwin.net.au/</uri>
      </address>
    </author>

    <date year="2017"/>

    <area>Applications and Real-Time</area>
    
    <keyword>HTTP</keyword> <keyword>H2</keyword>

    <abstract>


<t>This document defines an extension to the Hypertext Transfer Protocol Version 2 (HTTP/2) that
allows an endpoint to signal to its peer that an unsupported extension frame was discarded.</t>



    </abstract>


    <note title="Note to Readers">


<t>The issues list for this draft can be found at <eref target="https://github.com/phluid61/internet-drafts/labels/HTTP%2F2%20NAK%20Frame">https://github.com/phluid61/internet-drafts/labels/HTTP%2F2%20NAK%20Frame</eref></t>

<t>The most recent (often unpublished) draft is at <eref target="http://phluid61.github.io/internet-drafts/http2-nak-frame/">http://phluid61.github.io/internet-drafts/http2-nak-frame/</eref></t>


    </note>


  </front>

  <middle>


<section anchor="introduction" title="Introduction">

<t>Out of the box, the Hypertext Transfer Protocol Version 2 (HTTP/2) <xref target="RFC7540"/> makes provision for
extension frames to be sent on a connection, with or without prior agreement from either peer, with
the assertion that “implementations MUST discard frames that have unknown or unsupported types”
(<xref target="RFC7540"/>, Section 5.5).  However it can be useful to explicitly notify the peer if such a frame
is discarded.</t>

<t>This document defines an extension to HTTP/2 that allows a peer to signal that a received frame
was discarded, without altering the stream or connection state (<xref target="RFC7540"/>, Section 5.1), and in
particular without triggering an error condition.</t>

<section anchor="notational-conventions" title="Notational Conventions">

<t>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL
NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”,
“MAY”, and “OPTIONAL” in this document are to be interpreted as
described in BCP 14 <xref target="RFC2119"/> <xref target="RFC8174"/> when, and only when, they
appear in all capitals, as shown here.</t>

</section>
</section>
<section anchor="additions" title="Additions to HTTP/2">

<t>This document introduces a new HTTP/2 frame type (<xref target="RFC7540"/>, Section 11.2).</t>

<section anchor="dropped-frame" title="DROPPED_FRAME">

<t>DROPPED_FRAME frames (type code=0xTBA) can be sent on a connection at any time after the
connection preface except in the middle of a header block (<xref target="RFC7540"/>, Section 4.3) to indicate
that a received extension frame was discarded without any other action being taken.</t>

<figure title="DROPPED_FRAME Frame Payload"><artwork><![CDATA[
  +---------------+
  |   Type (8)    |
  +---------------+
]]></artwork></figure>

<t>The DROPPED_FRAME frame contains a single 8-bit integer containing the value of the Type field
from the discarded frame.</t>

<t>The DROPPED_FRAME frame does not define any flags.</t>

<t>An endpoint SHOULD send a DROPPED_FRAME frame for an unknown or unsupported extension frame type
the first time it discards a frame of that type.</t>

<t>An endpoint MAY send a DROPPED_FRAME frame for a particular frame type only once, even if it
discards multiple frames of that type.</t>

<t>An endpoint that receives a DROPPED_FRAME frame ought to take it as an indication that the
extension is not supported by the peer, and MAY subsequently choose not to send further frames of
that type or to attempt extension negotiation with the peer.  Extensions that define new HTTP/2
frame types MAY specify behaviours in response to DROPPED_FRAME frames with those types, however
extensions that change the semantics of existing protocol components, including those defined in
this document, MUST be negotiated before being used (<xref target="RFC7540"/>, Section 5.5).</t>

<t>Receipt of a DROPPED_FRAME frame does not necessarily mean that all frames on that connection with
the discarded type will be discarded in future.  A transparent intermediary that forwards an
extension frame in one direction and a corresponding DROPPED_FRAME frame in the other direction
MUST NOT intercept future frames of that type and preemptively reply with a DROPPED_FRAME frame.</t>

<t>DROPPED_FRAME frames are not associated with any individual stream.  If a DROPPED_FRAME frame is
received with a stream identifier field value other than 0x0, the recipient MUST respond with a
connection error (<xref target="RFC7540"/>, Section 5.4.1) of type PROTOCOL_ERROR.</t>

<t>Receipt of a DROPPED_FRAME frame with a length field value other than 1 MUST be treated as a
connection error (<xref target="RFC7540"/>, Section 5.4.1) of type FRAME_SIZE_ERROR.</t>

<t>An endpoint MUST NOT send a DROPPED_FRAME frame with a Type of DROPPED_FRAME (0xTBA).  If a
DROPPED_FRAME frame is received with a Type field value of 0xTBA, the recipient MUST respond with
a connection error (<xref target="RFC7540"/>, Section 5.4.1) of type PROTOCOL_ERROR.</t>

</section>
</section>
<section anchor="security-considerations" title="Security Considerations">

<t>Receipt of a DROPPED_FRAME frame does not guarantee that the sending peer will send one for
every frame type it drops, and the absence of a DROPPED_FRAME frame does not imply that the peer
has not discarded a frame.  Implementations MUST NOT depend on the use of DROPPED_FRAME frames to
indicate acceptance or rejection of extension frames.</t>

</section>
<section anchor="iana" title="IANA Considerations">

<t>This document updates the registry for frame types in the “Hypertext Transfer Protocol (HTTP) 2
Parameters” section.</t>

<section anchor="http2-frame-type-registry-update" title="HTTP/2 Frame Type Registry Update">

<t>This document updates the “HTTP/2 Frame Type” registry (<xref target="RFC7540"/>, Section 11.2).  The entries
in the following table are registered by this document.</t>

<texttable>
      <ttcol align='left'>Frame Type</ttcol>
      <ttcol align='left'>Code</ttcol>
      <ttcol align='left'>Section</ttcol>
      <c>DROPPED_FRAME</c>
      <c>TBD</c>
      <c><xref target="dropped-frame"/></c>
</texttable>

</section>
</section>


  </middle>

  <back>

    <references title='Normative References'>





<reference  anchor="RFC2119" target='https://www.rfc-editor.org/info/rfc2119'>
<front>
<title>Key words for use in RFCs to Indicate Requirement Levels</title>
<author initials='S.' surname='Bradner' fullname='S. Bradner'><organization /></author>
<date year='1997' month='March' />
<abstract><t>In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized. This document defines these words as they should be interpreted in IETF documents.  This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='2119'/>
<seriesInfo name='DOI' value='10.17487/RFC2119'/>
</reference>



<reference  anchor="RFC7540" target='https://www.rfc-editor.org/info/rfc7540'>
<front>
<title>Hypertext Transfer Protocol Version 2 (HTTP/2)</title>
<author initials='M.' surname='Belshe' fullname='M. Belshe'><organization /></author>
<author initials='R.' surname='Peon' fullname='R. Peon'><organization /></author>
<author initials='M.' surname='Thomson' fullname='M. Thomson' role='editor'><organization /></author>
<date year='2015' month='May' />
<abstract><t>This specification describes an optimized expression of the semantics of the Hypertext Transfer Protocol (HTTP), referred to as HTTP version 2 (HTTP/2).  HTTP/2 enables a more efficient use of network resources and a reduced perception of latency by introducing header field compression and allowing multiple concurrent exchanges on the same connection.  It also introduces unsolicited push of representations from servers to clients.</t><t>This specification is an alternative to, but does not obsolete, the HTTP/1.1 message syntax.  HTTP's existing semantics remain unchanged.</t></abstract>
</front>
<seriesInfo name='RFC' value='7540'/>
<seriesInfo name='DOI' value='10.17487/RFC7540'/>
</reference>



<reference  anchor="RFC8174" target='https://www.rfc-editor.org/info/rfc8174'>
<front>
<title>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</title>
<author initials='B.' surname='Leiba' fullname='B. Leiba'><organization /></author>
<date year='2017' month='May' />
<abstract><t>RFC 2119 specifies common key words that may be used in protocol  specifications.  This document aims to reduce the ambiguity by clarifying that only UPPERCASE usage of the key words have the  defined special meanings.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='8174'/>
<seriesInfo name='DOI' value='10.17487/RFC8174'/>
</reference>




    </references>




  </back>

<!-- ##markdown-source:
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
E3o8Pm7fwp7/b7LDX0sTkdyx/wLJMqFfLxYAAA==

-->

</rfc>

