<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.2.6 -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
]>

<?rfc toc="yes"?>
<?rfc tocindent="yes"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>
<?rfc strict="yes"?>
<?rfc compact="yes"?>
<?rfc comments="yes"?>
<?rfc inline="yes"?>

<rfc ipr="trust200902" docName="draft-kerwin-http2-nak-frame-01" category="std">

  <front>
    <title abbrev="http2-nak-frame">HTTP/2 "Dropped Frame" Frame</title>

    <author initials="M." surname="Kerwin" fullname="Matthew Kerwin">
      <organization></organization>
      <address>
        <email>matthew@kerwin.net.au</email>
        <uri>https://matthew.kerwin.net.au/</uri>
      </address>
    </author>

    <date year="2017"/>

    <area>Applications and Real-Time</area>
    
    <keyword>HTTP</keyword> <keyword>H2</keyword>

    <abstract>


<t>This document defines an extension to the Hypertext Transfer Protocol Version 2 (HTTP/2) that
allows an endpoint to signal to its peer that an unsupported extension frame was discarded.</t>



    </abstract>


    <note title="Note to Readers">


<t>The issues list for this draft can be found at <eref target="https://github.com/phluid61/internet-drafts/labels/HTTP%2F2%20NAK%20Frame">https://github.com/phluid61/internet-drafts/labels/HTTP%2F2%20NAK%20Frame</eref></t>

<t>The most recent (often unpublished) draft is at <eref target="http://phluid61.github.io/internet-drafts/http2-nak-frame/">http://phluid61.github.io/internet-drafts/http2-nak-frame/</eref></t>


    </note>


  </front>

  <middle>


<section anchor="introduction" title="Introduction">

<t>Out of the box, the Hypertext Transfer Protocol Version 2 (HTTP/2) <xref target="RFC7540"/> makes provision for
extension frames to be sent on a connection, with or without prior agreement from either peer, with
the assertion that “implementations MUST discard frames that have unknown or unsupported types”
(<xref target="RFC7540"/>, Section 5.5).  However it can be useful to explicitly notify the peer if such a frame
is discarded.</t>

<t>This document defines an extension to HTTP/2 that allows a peer to signal that a received frame
was discarded, without altering the stream or connection state (<xref target="RFC7540"/>, Section 5.1), and in
particular without triggering an error condition.</t>

<section anchor="notational-conventions" title="Notational Conventions">

<t>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL
NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”,
“MAY”, and “OPTIONAL” in this document are to be interpreted as
described in BCP 14 <xref target="RFC2119"/> <xref target="RFC8174"/> when, and only when, they
appear in all capitals, as shown here.</t>

</section>
</section>
<section anchor="additions" title="Additions to HTTP/2">

<t>This document introduces a new HTTP/2 frame type (<xref target="RFC7540"/>, Section 11.2).</t>

<section anchor="dropped-frame" title="DROPPED_FRAME">

<t>DROPPED_FRAME frames (type code=0xTBA) can be sent on a connection at any time after the
connection preface except in the middle of a header block (<xref target="RFC7540"/>, Section 4.3) to indicate
that a received extension frame was discarded without any other action being taken.</t>

<figure title="DROPPED_FRAME Frame Payload"><artwork><![CDATA[
  +---------------+
  |   Type (8)    |
  +---------------+
]]></artwork></figure>

<t>The DROPPED_FRAME frame contains a single 8-bit integer containing the value of the Type field
from the discarded frame.</t>

<t>The DROPPED_FRAME frame does not define any flags.</t>

<t>An endpoint SHOULD send a DROPPED_FRAME frame for an unknown or unsupported extension frame type
the first time it discards a frame of that type.</t>

<t>An endpoint MAY send a DROPPED_FRAME frame for a particular frame type only once, even if it
discards multiple frames of that type.</t>

<t>An endpoint that receives a DROPPED_FRAME frame ought to take it as an indication that the
extension is not supported by the peer, and MAY subsequently choose not to send further frames of
that type or to attempt extension negotiation with the peer.  Extensions that define new HTTP/2
frame types MAY specify behaviours in response to DROPPED_FRAME frames with those types, keeping
in mind that extensions that “change the semantics of existing protocol components [including
those defined in this document] MUST be negotiated before being used” (<xref target="RFC7540"/>, Section 5.5).</t>

<t>Receipt of a DROPPED_FRAME frame does not necessarily mean that all frames on that connection with
the discarded type will be discarded in future.  A transparent intermediary that forwards an
extension frame in one direction and a corresponding DROPPED_FRAME frame in the other direction
MUST NOT intercept future frames of that type and preemptively reply with a DROPPED_FRAME frame.</t>

<t>DROPPED_FRAME frames are not associated with any individual stream.  If a DROPPED_FRAME frame is
received with a stream identifier field value other than 0x0, the recipient MUST respond with a
connection error (<xref target="RFC7540"/>, Section 5.4.1) of type PROTOCOL_ERROR.</t>

<t>Receipt of a DROPPED_FRAME frame with a length field value other than 1 MUST be treated as a
connection error (<xref target="RFC7540"/>, Section 5.4.1) of type FRAME_SIZE_ERROR.</t>

<t>An endpoint MUST NOT send a DROPPED_FRAME frame with a Type of DROPPED_FRAME (0xTBA).  If a
DROPPED_FRAME frame is received with a Type field value of 0xTBA, the recipient MUST respond with
a connection error (<xref target="RFC7540"/>, Section 5.4.1) of type PROTOCOL_ERROR.</t>

</section>
</section>
<section anchor="security-considerations" title="Security Considerations">

<t>Receipt of a DROPPED_FRAME frame does not guarantee that the sending peer will send one for
every frame type it drops, and the absence of a DROPPED_FRAME frame does not imply that the peer
has not discarded a frame.  Implementations MUST NOT depend on the use of DROPPED_FRAME frames to
indicate acceptance or rejection of extension frames.</t>

</section>
<section anchor="iana" title="IANA Considerations">

<t>This document updates the registry for frame types in the “Hypertext Transfer Protocol (HTTP) 2
Parameters” section.</t>

<section anchor="http2-frame-type-registry-update" title="HTTP/2 Frame Type Registry Update">

<t>This document updates the “HTTP/2 Frame Type” registry (<xref target="RFC7540"/>, Section 11.2).  The entries
in the following table are registered by this document.</t>

<texttable>
      <ttcol align='left'>Frame Type</ttcol>
      <ttcol align='left'>Code</ttcol>
      <ttcol align='left'>Section</ttcol>
      <c>DROPPED_FRAME</c>
      <c>TBD</c>
      <c><xref target="dropped-frame"/></c>
</texttable>

</section>
</section>


  </middle>

  <back>

    <references title='Normative References'>





<reference  anchor="RFC2119" target='https://www.rfc-editor.org/info/rfc2119'>
<front>
<title>Key words for use in RFCs to Indicate Requirement Levels</title>
<author initials='S.' surname='Bradner' fullname='S. Bradner'><organization /></author>
<date year='1997' month='March' />
<abstract><t>In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized. This document defines these words as they should be interpreted in IETF documents.  This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='2119'/>
<seriesInfo name='DOI' value='10.17487/RFC2119'/>
</reference>



<reference  anchor="RFC7540" target='https://www.rfc-editor.org/info/rfc7540'>
<front>
<title>Hypertext Transfer Protocol Version 2 (HTTP/2)</title>
<author initials='M.' surname='Belshe' fullname='M. Belshe'><organization /></author>
<author initials='R.' surname='Peon' fullname='R. Peon'><organization /></author>
<author initials='M.' surname='Thomson' fullname='M. Thomson' role='editor'><organization /></author>
<date year='2015' month='May' />
<abstract><t>This specification describes an optimized expression of the semantics of the Hypertext Transfer Protocol (HTTP), referred to as HTTP version 2 (HTTP/2).  HTTP/2 enables a more efficient use of network resources and a reduced perception of latency by introducing header field compression and allowing multiple concurrent exchanges on the same connection.  It also introduces unsolicited push of representations from servers to clients.</t><t>This specification is an alternative to, but does not obsolete, the HTTP/1.1 message syntax.  HTTP's existing semantics remain unchanged.</t></abstract>
</front>
<seriesInfo name='RFC' value='7540'/>
<seriesInfo name='DOI' value='10.17487/RFC7540'/>
</reference>



<reference  anchor="RFC8174" target='https://www.rfc-editor.org/info/rfc8174'>
<front>
<title>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</title>
<author initials='B.' surname='Leiba' fullname='B. Leiba'><organization /></author>
<date year='2017' month='May' />
<abstract><t>RFC 2119 specifies common key words that may be used in protocol  specifications.  This document aims to reduce the ambiguity by clarifying that only UPPERCASE usage of the key words have the  defined special meanings.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='8174'/>
<seriesInfo name='DOI' value='10.17487/RFC8174'/>
</reference>




    </references>




  </back>

<!-- ##markdown-source:
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

-->

</rfc>

