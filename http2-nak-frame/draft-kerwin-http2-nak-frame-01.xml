<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.2.6 -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
]>

<?rfc toc="yes"?>
<?rfc tocindent="yes"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>
<?rfc strict="yes"?>
<?rfc compact="yes"?>
<?rfc comments="yes"?>
<?rfc inline="yes"?>

<rfc ipr="trust200902" docName="draft-kerwin-http2-nak-frame-01" category="std">

  <front>
    <title abbrev="http2-nak-frame">HTTP/2 "Dropped Frame" Frame</title>

    <author initials="M." surname="Kerwin" fullname="Matthew Kerwin">
      <organization></organization>
      <address>
        <email>matthew@kerwin.net.au</email>
        <uri>http://matthew.kerwin.net.au/</uri>
      </address>
    </author>

    <date year="2017"/>

    <area>Applications and Real-Time</area>
    
    <keyword>HTTP</keyword> <keyword>H2</keyword>

    <abstract>


<t>This document defines an extension to the Hypertext Transfer Protocol Version 2 (HTTP/2) that
allows an endpoint to signal to its peer that an unsupported extension frame was discarded.</t>



    </abstract>


    <note title="Note to Readers">


<t>The issues list for this draft can be found at <eref target="https://github.com/phluid61/internet-drafts/labels/HTTP%2F2%20NAK%20Frame">https://github.com/phluid61/internet-drafts/labels/HTTP%2F2%20NAK%20Frame</eref></t>

<t>The most recent (often unpublished) draft is at <eref target="http://phluid61.github.io/internet-drafts/http2-nak-frame/">http://phluid61.github.io/internet-drafts/http2-nak-frame/</eref></t>


    </note>


  </front>

  <middle>


<section anchor="introduction" title="Introduction">

<t>Out of the box, the Hypertext Transfer Protocol Version 2 (HTTP/2) <xref target="RFC7540"/> makes provision for
extension frames to be sent on a connection, with or without prior agreement from either peer, with
the assertion that “implementations MUST discard frames that have unknown or unsupported types”
(<xref target="RFC7540"/>, Section 5.5).  However it can be useful to explicitly notify the peer if such a frame
is discarded.</t>

<t>This document defines an extension to HTTP/2 that allows a peer to signal that a received frame
was discarded, without altering the stream or connection state (<xref target="RFC7540"/>, Section 5.1), and in
particular without triggering an error condition.</t>

<section anchor="notational-conventions" title="Notational Conventions">

<t>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL
NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”,
“MAY”, and “OPTIONAL” in this document are to be interpreted as
described in BCP 14 <xref target="RFC2119"/> <xref target="RFC8174"/> when, and only when, they
appear in all capitals, as shown here.</t>

</section>
</section>
<section anchor="additions" title="Additions to HTTP/2">

<t>This document introduces a new HTTP/2 frame type (<xref target="RFC7540"/>, Section 11.2).</t>

<section anchor="dropped-frame" title="DROPPED_FRAME">

<t>DROPPED_FRAME frames (type code=0xTBA) can be sent on a connection at any time after the
connection preface except in the middle of a header block (<xref target="RFC7540"/>, Section 4.3) to indicate
that a received extension frame was discarded without any other action being taken.</t>

<figure title="DROPPED_FRAME Frame Payload"><artwork><![CDATA[
  +---------------+
  |   Type (8)    |
  +---------------+
]]></artwork></figure>

<t>The DROPPED_FRAME frame contains a single 8-bit integer containing the value of the Type field
from the discarded frame.</t>

<t>The DROPPED_FRAME frame does not define any flags.</t>

<t>An endpoint SHOULD send a DROPPED_FRAME frame for an unknown or unsupported extension frame type
the first time it discards a frame of that type.</t>

<t>An endpoint MAY send a DROPPED_FRAME frame for a particular frame type only once, even if it
discards multiple frames of that type.</t>

<t>An endpoint that receives a DROPPED_FRAME frame ought to take it as an indication that the
extension is not supported by the peer, and MAY subsequently choose not to send further frames of
that type or to attempt extension negotiation with the peer.  Extensions that define new HTTP/2
frame types MAY specify behaviours in response to DROPPED_FRAME frames with those types, keeping
in mind that extensions that “change the semantics of existing protocol components MUST be
negotiated before being used” (<xref target="RFC7540"/>, Section 5.5).</t>

<t>Receipt of a DROPPED_FRAME frame does not necessarily mean that all frames on that connection with
the discarded type will be discarded in future.  A transparent intermediary that forwards an
extension frame in one direction and a corresponding DROPPED_FRAME frame in the other direction
MUST NOT intercept future frames of that type and preemptively reply with a DROPPED_FRAME frame.</t>

<t>DROPPED_FRAME frames are not associated with any individual stream.  If a DROPPED_FRAME frame is
received with a stream identifier field value other than 0x0, the recipient MUST respond with a
connection error (<xref target="RFC7540"/>, Section 5.4.1) of type PROTOCOL_ERROR.</t>

<t>Receipt of a DROPPED_FRAME frame with a length field value other than 1 MUST be treated as a
connection error (<xref target="RFC7540"/>, Section 5.4.1) of type FRAME_SIZE_ERROR.</t>

<t>An endpoint MUST NOT send a DROPPED_FRAME frame with a Type of DROPPED_FRAME (0xTBA).  If a
DROPPED_FRAME frame is received with a Type field value of 0xTBA, the recipient MUST respond with
a connection error (<xref target="RFC7540"/>, Section 5.4.1) of type PROTOCOL_ERROR.</t>

</section>
</section>
<section anchor="security-considerations" title="Security Considerations">

<t>Receipt of a DROPPED_FRAME frame does not guarantee that the sending peer will send one for
every frame type it drops, and the absence of a DROPPED_FRAME frame does not imply that the peer
has not discarded a frame.  Implementations MUST NOT depend on the use of DROPPED_FRAME frames to
indicate acceptance or rejection of extension frames.</t>

</section>
<section anchor="iana" title="IANA Considerations">

<t>This document updates the registry for frame types in the “Hypertext Transfer Protocol (HTTP) 2
Parameters” section.</t>

<section anchor="http2-frame-type-registry-update" title="HTTP/2 Frame Type Registry Update">

<t>This document updates the “HTTP/2 Frame Type” registry (<xref target="RFC7540"/>, Section 11.2).  The entries
in the following table are registered by this document.</t>

<texttable>
      <ttcol align='left'>Frame Type</ttcol>
      <ttcol align='left'>Code</ttcol>
      <ttcol align='left'>Section</ttcol>
      <c>DROPPED_FRAME</c>
      <c>TBD</c>
      <c><xref target="dropped-frame"/></c>
</texttable>

</section>
</section>


  </middle>

  <back>

    <references title='Normative References'>





<reference  anchor="RFC2119" target='https://www.rfc-editor.org/info/rfc2119'>
<front>
<title>Key words for use in RFCs to Indicate Requirement Levels</title>
<author initials='S.' surname='Bradner' fullname='S. Bradner'><organization /></author>
<date year='1997' month='March' />
<abstract><t>In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized. This document defines these words as they should be interpreted in IETF documents.  This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='2119'/>
<seriesInfo name='DOI' value='10.17487/RFC2119'/>
</reference>



<reference  anchor="RFC7540" target='https://www.rfc-editor.org/info/rfc7540'>
<front>
<title>Hypertext Transfer Protocol Version 2 (HTTP/2)</title>
<author initials='M.' surname='Belshe' fullname='M. Belshe'><organization /></author>
<author initials='R.' surname='Peon' fullname='R. Peon'><organization /></author>
<author initials='M.' surname='Thomson' fullname='M. Thomson' role='editor'><organization /></author>
<date year='2015' month='May' />
<abstract><t>This specification describes an optimized expression of the semantics of the Hypertext Transfer Protocol (HTTP), referred to as HTTP version 2 (HTTP/2).  HTTP/2 enables a more efficient use of network resources and a reduced perception of latency by introducing header field compression and allowing multiple concurrent exchanges on the same connection.  It also introduces unsolicited push of representations from servers to clients.</t><t>This specification is an alternative to, but does not obsolete, the HTTP/1.1 message syntax.  HTTP's existing semantics remain unchanged.</t></abstract>
</front>
<seriesInfo name='RFC' value='7540'/>
<seriesInfo name='DOI' value='10.17487/RFC7540'/>
</reference>



<reference  anchor="RFC8174" target='https://www.rfc-editor.org/info/rfc8174'>
<front>
<title>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</title>
<author initials='B.' surname='Leiba' fullname='B. Leiba'><organization /></author>
<date year='2017' month='May' />
<abstract><t>RFC 2119 specifies common key words that may be used in protocol  specifications.  This document aims to reduce the ambiguity by clarifying that only UPPERCASE usage of the key words have the  defined special meanings.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='8174'/>
<seriesInfo name='DOI' value='10.17487/RFC8174'/>
</reference>




    </references>




  </back>

<!-- ##markdown-source:
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
8fi4fdN6/r/JDn8fTURyx/4L1dZRlhIWAAA=

-->

</rfc>

